<app-main-navbar></app-main-navbar>

<main class="profile-page bg-blueGray-200">
    <section class="relative block h-500-px">
        <div class="absolute top-0 w-full h-full bg-center bg-cover image-container" style="
        background-image: url({{backPhoto}})">
            <span id="blackOverlay" class="w-full h-full absolute opacity-50 bg-black"></span>
            <div class="overlay1">
                <label for="fileInput1" style="color: white;font-size: xx-large;">Izmeni</label>
                <input #fileInput1 id="fileInput1" type="file" (change)="loadPhoto($event,1)" class="hidden"
                    accept=".jpg, .jpeg, .png">
            </div>
        </div>
        <div class="top-auto bottom-0 left-0 right-0 w-full absolute pointer-events-none overflow-hidden h-70-px"
            style="transform: translateZ(0); display: flex; justify-content: center; margin-bottom: 5px;">
        </div>
    </section>
    <section class="relative">
        <div class="relative flex flex-col min-w-0 break-words w-full mb-6 rounded-lg bg-blueGray-200 border-0">

            <div class="flex-auto px-4 lg:px-10 py-10 pt-0">
                <form>
                    <div class="flex flex-wrap">
                        <div class="w-full lg:w-6/12 px-4">
                            <div class="relative w-full mb-3">
                                <label class="block uppercase text-blueGray-600 text-xs font-bold mb-2"
                                    htmlFor="grid-password">
                                    Profesija
                                </label>
                                <input type="text" [placeholder]="updatedJob.profession"
                                    class="border-0 px-3 py-3 placeholder-blueGray-300 text-blueGray-600 bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150"
                                    [(ngModel)]="updatedJob.profession" name="profession" />
                            </div>
                        </div>
                        <div class="w-full lg:w-6/12 px-4">
                            <div class="relative w-full mb-3">
                                <label class="block uppercase text-blueGray-600 text-xs font-bold mb-2"
                                    htmlFor="grid-password">
                                    Naslov
                                </label>
                                <input type="text" [placeholder]="updatedJob.title"
                                    class="border-0 px-3 py-3 placeholder-blueGray-300 text-blueGray-600 bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150"
                                    [(ngModel)]="updatedJob.title" name="title" />
                            </div>
                        </div>
                        <div class="w-full lg:w-6/12 px-4">
                            <div class="relative w-full mb-3">
                                <label class="block uppercase text-blueGray-600 text-xs font-bold mb-2"
                                    htmlFor="grid-password">
                                    Grad
                                </label>
                                <input type="text"
                                    class="border-0 px-3 py-3 placeholder-blueGray-300 text-blueGray-600 bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150"
                                    [(ngModel)]="updatedJob.city" name="city" />
                            </div>
                        </div>
                        <div class="w-full lg:w-6/12 px-4">
                            <div class="relative w-full mb-3">
                                <label class="block uppercase text-blueGray-600 text-xs font-bold mb-2"
                                    htmlFor="grid-password">
                                    Opis
                                </label>
                                <textarea id="description" rows="3" name="description"
                                    [(ngModel)]="updatedJob.description"
                                    class="border-0 px-3 py-3 placeholder-blueGray-300 text-blueGray-600 bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150"></textarea>
                            </div>
                        </div>
                    </div>

                    <div style="width: 100%;display: flex; justify-content: center;">
                        <div style="display: flex; flex-direction: column;margin-bottom: 20px;">
                            <button
                                style="margin-top: 5px;  background-color: rgb(255, 232, 60); color:rgb(30, 41, 59); "
                                (click)="update()"
                                class="active:bg-red-700 uppercase text-white font-bold hover:shadow-md shadow text-xs px-4 py-2 rounded outline-none focus:outline-none sm:mr-2 mb-1 ease-linear transition-all duration-150"
                                type="button">
                                Izmeni informacije
                            </button>
                        </div>
                    </div>
                    <hr class="mt-6 border-b-1 border-blueGray-300" />


                    <h6 class="text-blueGray-400 text-sm mt-3 mb-6 font-bold uppercase">
                        Galerija
                    </h6>
                    <div class="flex flex-wrap">
                        <div class="w-full lg:w-12/12 px-4">
                            <div class="relative w-full mb-3">
                                <!-- <label class="block uppercase text-blueGray-600 text-xs font-bold mb-2"
                                    htmlFor="grid-password">
                                    Galerija
                                </label> -->
                                <gallery id="{{galleryId}}" *ngIf="imagesLoaded"
                                    style="background-color: rgba(241, 245, 249) ;width: 100% !important; height: 650px !important; object-fit: cover; margin: 5px;"
                                    (indexChange)="onIndexChange($event)"></gallery>

                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <button (click)="delete()"
                                        class="uppercase font-bold hover:shadow-md shadow text-xs px-4 py-2 rounded outline-none focus:outline-none sm:mr-2 mb-1 ease-linear transition-all duration-150"
                                        type="button" style="background-color: rgb(255, 232, 60);">
                                        Ukloni sliku
                                    </button>
                                    <button (click)="updateGallery()"
                                        class="uppercase font-bold hover:shadow-md shadow text-xs px-4 py-2 rounded outline-none focus:outline-none sm:mr-2 mb-1 ease-linear transition-all duration-150"
                                        type="button" style="background-color: rgb(255, 232, 60);">
                                        Potvrdi izmene
                                    </button>
                                    <label for="fileInput"
                                        class="hover:bg-red-700 active:bg-red-700 cursor-pointer uppercase font-bold text-xs px-2 py-2 rounded shadow-md"
                                        style="background-color: rgb(255, 232, 60);">
                                        Dodaj slike
                                    </label>
                                    <input id="fileInput" type="file" [(ngModel)]="newphoto" name="newphoto"
                                        (change)="loadPhoto($event,1)" class="hidden" accept=".jpg, .jpeg, .png"
                                        multiple>

                                </div>



                                <div style="display: flex; justify-content: center; margin-top: 10px;">

                                </div>

                            </div>
                        </div>
                        <div class="w-full lg:w-3/12"></div>


                    </div>

                    <div style="width: 100%;display: flex; justify-content: center;">
                        <div style="display: flex; flex-direction: column;margin-bottom: 20px;">
                            <div *ngIf="message" [ngClass]="{'error-message': err === 1, 'success-message': err === 0}"
                                style="width: 100%; text-align: center; margin-top: 20px; color: white; padding: 10px; border-radius: 5px;">
                                {{message}}
                            </div>

                        </div>


                    </div>
                </form>
            </div>
        </div>
    </section>

    <app-footer></app-footer>


    <style>
        .image-container {
            position: relative;
            display: inline-block;
        }

        .overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            /* Zatamnjenje sa 50% providnosti */
            opacity: 0;
            /* Poƒçetno stanje - nevidljivo */
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 50%;
            transition: opacity 0.3s;
            /* Efekat prelaza */
        }

        .overlay1 {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            opacity: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: opacity 0.3s;
        }

        .image-container:hover .overlay {
            opacity: 1;
        }

        .image-container:hover .overlay1 {
            opacity: 1;
        }

        input[type="file"].hidden {
            display: none;
        }

        .error-message {
            background-color: rgb(239, 114, 114);
        }

        .success-message {
            background-color: rgb(59, 185, 109);
        }
    </style>