<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css"
integrity="sha256-kLaT2GOSpHechhsozzB+flnD+zUyjE2LlfWPgU04xyI="
crossorigin=""/>
<script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"
integrity="sha256-WBkoXOwTeyKclOHuWtc+i2uENFpDZ9YPdf5Hf+D7ewM="
crossorigin=""></script>

<main class="profile-page">
    <section class="relative block h-500-px">
        <div class="absolute top-0 w-full h-full bg-center bg-cover" style="
        background-image: url('https://images.unsplash.com/photo-1499336315816-097655dcfbda?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=2710&q=80');
      ">
            <span id="blackOverlay" class="w-full h-full absolute opacity-50 bg-black"></span>
        </div>
        <div class="top-auto bottom-0 left-0 right-0 w-full absolute pointer-events-none overflow-hidden h-70-px"
            style="transform: translateZ(0)">
            <svg class="absolute bottom-0 overflow-hidden" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none"
                version="1.1" viewBox="0 0 2560 100" x="0" y="0">
                <polygon class="text-blueGray-200 fill-current" points="2560 0 2560 100 0 100"></polygon>
            </svg>
        </div>
    </section>
    <section class="relative py-16 bg-blueGray-200">
        <div class="container mx-auto px-4">
            <div class="relative flex flex-col min-w-0 break-words bg-white w-full mb-6 shadow-xl rounded-lg -mt-64">
                <div class="px-6">
                    <div class="flex flex-wrap justify-center">
                        <div class="w-full lg:w-3/12 px-4 lg:order-2 flex justify-center">
                            <div class="relative im">
                                <img alt="..." [src]="job.photo"
                                    class="shadow-xl rounded-full h-auto align-middle border-none absolute -m-16 -ml-20 lg:-ml-16 max-w-150-px" />
                            </div>

                        </div>
                        <div class="w-full lg:w-4/12 px-4 lg:order-3 lg:text-right lg:self-center c">

                            <div class="flex justify-center py-4 lg:pt-4 pt-8">
                                <div class="mr-4 p-3 text-center">
                                    <span class="text-xl font-bold block uppercase tracking-wide text-blueGray-600">
                                        22
                                    </span>
                                    <span class="text-sm text-blueGray-400">Odrađenih poslova</span>
                                </div>
                                <div class="mr-4 p-3 text-center">
                                    <span class="text-xl font-bold block uppercase tracking-wide text-blueGray-600">
                                        {{job.avgRate}}
                                    </span>
                                    <span class="text-sm text-blueGray-400">Ocena</span>
                                </div>
                                <!-- <div class="mr-4 p-3 text-center">
                  <span
                    class="text-xl font-bold block uppercase tracking-wide text-blueGray-600"
                  >
                  {{userRateLen}}
                  </span>
                  <span class="text-sm text-blueGray-400">Broj ocena </span>
                </div> -->
                                <div class="lg:mr-4 p-3 text-center">
                                    <span class="text-xl font-bold block uppercase tracking-wide text-blueGray-600">
                                        {{comments.length}}
                                    </span>
                                    <span class="text-sm text-blueGray-400">Pitanja</span>
                                </div>
                            </div>

                            <div class="py-3 px-3 mt-0 sm:mt-16"
                                style="display: flex; flex-direction: column; align-items: center;"
                                *ngIf="cookie==idUser">
                                <div style="display: flex; flex-direction: row; padding: 3px; ">
                                    <i class="fas fa-star"
                                        [ngClass]="{'text-red-500': rating >= 1, 'text-gray-500': rating < 1}"
                                        style="font-size: 30px;" id="1" (click)="setRating(1)"></i>
                                    <i class="fas fa-star"
                                        [ngClass]="{'text-red-500': rating >= 2, 'text-gray-500': rating < 2}"
                                        style="font-size: 30px;" id="2" (click)="setRating(2)"></i>
                                    <i class="fas fa-star"
                                        [ngClass]="{'text-red-500': rating >= 3, 'text-gray-500': rating < 3}"
                                        style="font-size: 30px;" id="3" (click)="setRating(3)"></i>
                                    <i class="fas fa-star"
                                        [ngClass]="{'text-red-500': rating >= 4, 'text-gray-500': rating < 4}"
                                        style="font-size: 30px;" id="4" (click)="setRating(4)"></i>
                                    <i class="fas fa-star"
                                        [ngClass]="{'text-red-500': rating >= 5, 'text-gray-500': rating < 5}"
                                        style="font-size: 30px;" id="5" (click)="setRating(5)"></i>
                                </div>
                                <button style="margin-top: 5px;" (click)="rate()"
                                    class="bg-red-600 active:bg-red-700 uppercase text-white font-bold hover:shadow-md shadow text-xs px-4 py-2 rounded outline-none focus:outline-none sm:mr-2 mb-1 ease-linear transition-all duration-150"
                                    type="button">
                                    Potvrdi
                                </button>
                            </div>
                            <div class="py-3 px-3 mt-0 sm:mt-16"
                                style="display: flex; flex-direction: column; align-items: center;"
                                *ngIf="cookie!=idUser">

                                <div style="display: flex; flex-direction: row;">
                                    <button style="margin-top: 5px;"
                                        class="bg-emerald-200 text-blueGray-600 uppercase font-bold hover:shadow-md shadow text-xs px-4 py-2 rounded outline-none focus:outline-none sm:mr-2 mb-1 ease-linear transition-all duration-150"
                                        type="button">
                                        Kalendar
                                    </button>
                                    <button style="margin-top: 5px;"
                                        class="bg-emerald-200 text-blueGray-600 uppercase font-bold hover:shadow-md shadow text-xs px-4 py-2 rounded outline-none focus:outline-none sm:mr-2 mb-1 ease-linear transition-all duration-150"
                                        type="button">
                                        Rezerviši termin
                                    </button>
                                    <button style="margin-top: 5px;"
                                        class="bg-emerald-200 text-blueGray-600 uppercase font-bold hover:shadow-md shadow text-xs px-4 py-2 rounded outline-none focus:outline-none sm:mr-2 mb-1 ease-linear transition-all duration-150"
                                        type="button">
                                        Oceni majstora
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="w-full lg:w-4/12 px-4 lg:order-1">
                            <div class="text-center mt-12">
                                <h3 class="text-4xl font-semibold leading-normal mb-2 text-blueGray-700 mb-2">
                                    {{job.username}} &nbsp; {{job.username}}
                                </h3>
                                <div class="text-md leading-normal mt-0 mb-2 text-blueGray-400 font-bold uppercase">
                                    <i class="fas  fa-map-marker-alt mr-2 text-lg text-blueGray-400"></i>
                                    {{ job.city }}
                                </div>
                                <div class="mb-2 text-blueGray-600">
                                    <i class="fas fa-user mr-2 text-lg text-blueGray-400"></i>
                                    {{job.profession}}
                                </div>
                                <!-- <div class="mb-2 text-blueGray-600">
                  <i class="fas fa-phone mr-2 text-lg text-blueGray-400"></i>
                  {{phone}}
                </div> -->
                            </div>
                        </div>
                    </div>

                </div>
                <div class="relative flex flex-col min-w-0 break-words bg-white w-full mb-6 shadow-lg rounded">
                    <div class="rounded-t mb-0 px-4 py-3 border-0" style="margin-top: 15px;">
                        <div class="flex flex-wrap items-center">
                            <div class="relative w-full px-4 max-w-full flex-grow flex-1">
                                <hr>
                                <h3
                                    class="text-4xl font-semibold leading-normal mb-2 text-blueGray-700 mb-2 text-center">
                                    Opis posla</h3>
                                <p class="text-lg mb-2 text-blueGray-700 mb-2 text-center">{{job.description}}</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!--   Pitanja   -->
                <div class="relative flex flex-col min-w-0 break-words bg-white w-full mb-2 shadow-lg rounded">
                    <div class="rounded-t mb-0 px-4 border-0" style="margin-top: 15px;">
                        <div class="flex flex-wrap items-center">
                            <div class="relative w-full px-4 max-w-full flex-grow flex-1">
                                <hr>
                                <h3
                                    class="text-4xl font-semibold leading-normal mb-2 text-blueGray-700 mb-2 text-center">
                                    Pitanja</h3>
                            </div>
                        </div>
                    </div>
                    <div class="block w-full overflow-x-auto">
                        <table class="items-center w-full bg-transparent border-collapse">
                            <tbody>
                                <tr style="display: flex; flex-direction: row; align-items: center; padding: 10px; "
                                    *ngFor="let comm of comments.slice(0, visibleComments) "
                                    class="border-t-0 px-6 align-middle border-l-0 border-r-0  whitespace-nowrap  text-left">
                                    <img alt="..." [src]="comm.photo" class="shadow-xl rounded-full border-none"
                                        style="width: 30px; height: 30px; margin: 5px;" /> <i>{{comm.username}} {{
                                        comm.dateC | date: 'dd.MM.yyyy' }}:</i> &nbsp; &nbsp; {{comm.comment}}
                                    <br>
                                    <div style="width:100%;display: flex; justify-content: flex-end;"
                                        *ngIf="comm.idCommentator == cookie"><i class='fas fa-trash-alt'
                                            style='font-size:24px' (click)="deleteComment(comm.id)"></i>
                                    </div>

                                </tr>
                                <tr>
                                    <div style="background-color: white; "
                                        class="relative w-full px-4 max-w-full flex-grow flex-1 text-center">
                                        <button style="margin:10px;" (click)="more()"
                                            class="bg-indigo-500 text-white active:bg-indigo-600 text-xs font-bold uppercase px-3 py-1 rounded outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150"
                                            type="button">
                                            Prikaži više
                                        </button>

                                        <button style="margin:10px;" (click)="less()"
                                            class="bg-indigo-500 text-white active:bg-indigo-600 text-xs font-bold uppercase px-3 py-1 rounded outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150"
                                            type="button">
                                            Prikaži manje
                                        </button>
                                    </div>
                                </tr>
                                <tr style="display: flex; flex-direction: row; justify-content: space-between;">
                                    <input style="width: 100%;" name="comment" type="text"
                                        [(ngModel)]="comment"
                                        class="ml-2 border placeholder-blueGray-300 text-blueGray-600 bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150"
                                        placeholder="Unesite pitanje" [disabled]="cookie === idUser" />
                                    <button
                                        class="px-4 ml-2 bg-blueGray-800 text-white active:bg-blueGray-600 text-sm font-bold uppercase  rounded shadow hover:shadow-lg outline-none focus:outline-none mr-1 mb-1  ease-linear transition-all duration-150"
                                        type="button" (click)="addComment()">
                                        Pošalji
                                    </button>
                                </tr>

                            </tbody>
                        </table>

                    </div>
                </div>
                <!--   Galerija   -->
                <div style="display: flex; flex-direction: column; gap: 20px; margin-top: 20px;">
                    <h3 class="text-4xl font-semibold leading-normal mb-2 text-blueGray-700 mb-2 text-center">Galerija
                    </h3>
                    <hr>
                    <!-- <gallery *ngIf="imagesLoaded" [items]="images"
                        style="background-color: transparent !important;  width: 100% !important;height: 750px !important;object-fit: cover;">
                    </gallery> -->
                    <gallery  id="{{galleryId}}" *ngIf="imagesLoaded"  style="background-color: white ;width: 100% !important; height: 650px !important; object-fit: cover;"
                      (indexChange)="onIndexChange($event)"></gallery>
                 
                </div>
                

            </div>

        </div>
    </section>
    <div id="map" style="height: 500px;"></div>


</main>


  
<style>
    @media screen and (max-width: 1025px) {



        .c {
            margin-top: 70px;
        }
    }


    table.items-center tr:nth-child(even) {
        background-color: #f2f2f2;
    }
</style>
<app-footer></app-footer>